



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Message based domain layers. Shipped with industry standard infrastructure.">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.7.0">
    
    
      
        <title>Symfony Console - MsgPHP Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../style.css">
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114399471-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114399471-1');
</script>

  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#symfony-console" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="MsgPHP Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                MsgPHP Documentation
              </span>
              <span class="md-header-nav__topic">
                Symfony Console
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/msgphp/msgphp/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    MsgPHP Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/msgphp/msgphp/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../code-conventions/" title="Code conventions" class="md-nav__link">
      Code conventions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Domain-driven-design
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Domain-driven-design
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/identifiers/" title="Identifiers" class="md-nav__link">
      Identifiers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/identities/" title="Identities" class="md-nav__link">
      Identities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/identity-mapping/" title="Identity mapping" class="md-nav__link">
      Identity mapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/collections/" title="Collections" class="md-nav__link">
      Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Factories
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Factories
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/factory/object/" title="Object factory" class="md-nav__link">
      Object factory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/factory/entity-aware/" title="Entity aware factory" class="md-nav__link">
      Entity aware factory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/factory/static/" title="Static factory" class="md-nav__link">
      Static factory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/repositories/" title="Repositories" class="md-nav__link">
      Repositories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ddd/entities/" title="Entities" class="md-nav__link">
      Entities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Event sourcing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Event sourcing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../event-sourcing/events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../event-sourcing/event-handlers/" title="Event handlers" class="md-nav__link">
      Event handlers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Message driven
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Message driven
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../message-driven/message-bus/" title="Message bus" class="md-nav__link">
      Message bus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../message-driven/message-dispatcher/" title="Message dispatcher" class="md-nav__link">
      Message dispatcher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../message-driven/cqrs/" title="CQRS" class="md-nav__link">
      CQRS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Projection
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Projection
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/documents/" title="Documents" class="md-nav__link">
      Documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/document-transformers/" title="Document transformers" class="md-nav__link">
      Document transformers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/type-registry/" title="Type registry" class="md-nav__link">
      Type registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/repositories/" title="Repositories" class="md-nav__link">
      Repositories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../projection/synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api-platform/" title="API Platform" class="md-nav__link">
      API Platform
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../doctrine-collections/" title="Doctrine Collections" class="md-nav__link">
      Doctrine Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../doctrine-dbal/" title="Doctrine DBAL" class="md-nav__link">
      Doctrine DBAL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../doctrine-orm/" title="Doctrine ORM" class="md-nav__link">
      Doctrine ORM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../psr-container/" title="PSR Container" class="md-nav__link">
      PSR Container
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Symfony Console
      </label>
    
    <a href="./" title="Symfony Console" class="md-nav__link md-nav__link--active">
      Symfony Console
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commands" title="Commands" class="md-nav__link">
    Commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initializedomainprojectiontypescommand" title="InitializeDomainProjectionTypesCommand" class="md-nav__link">
    InitializeDomainProjectionTypesCommand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronizedomainprojectionscommand" title="SynchronizeDomainProjectionsCommand" class="md-nav__link">
    SynchronizeDomainProjectionsCommand
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-factory" title="Context Factory" class="md-nav__link">
    Context Factory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" title="API" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configureinputdefinition-definition-void" title="configure(InputDefinition $definition): void" class="md-nav__link">
    configure(InputDefinition $definition): void
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcontextinputinterface-input-styleinterface-io-array-values-array" title="getContext(InputInterface $input, StyleInterface $io, array $values = []): array" class="md-nav__link">
    getContext(InputInterface $input, StyleInterface $io, array $values = []): array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementations" title="Implementations" class="md-nav__link">
    Implementations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msgphpdomaininfraconsolecontextclasscontextfactory" title="MsgPhp\Domain\Infra\Console\Context\ClassContextFactory" class="md-nav__link">
    MsgPhp\Domain\Infra\Console\Context\ClassContextFactory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customizing-context-elements" title="Customizing context elements" class="md-nav__link">
    Customizing context elements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-example" title="Basic example" class="md-nav__link">
    Basic example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgphpdomaininfraconsolecontextdoctrineentitycontextfactory" title="MsgPhp\Domain\Infra\Console\Context\DoctrineEntityContextFactory" class="md-nav__link">
    MsgPhp\Domain\Infra\Console\Context\DoctrineEntityContextFactory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uuid/" title="UUID" class="md-nav__link">
      UUID
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Cookbook
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Cookbook
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cookbook/bundle-installation/" title="Bundle installation" class="md-nav__link">
      Bundle installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/identifiers/" title="Domain identifiers" class="md-nav__link">
      Domain identifiers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/entities/" title="Domain entities" class="md-nav__link">
      Domain entities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/doctrine-identifier-types/" title="Doctrine identifier types" class="md-nav__link">
      Doctrine identifier types
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#commands" title="Commands" class="md-nav__link">
    Commands
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initializedomainprojectiontypescommand" title="InitializeDomainProjectionTypesCommand" class="md-nav__link">
    InitializeDomainProjectionTypesCommand
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronizedomainprojectionscommand" title="SynchronizeDomainProjectionsCommand" class="md-nav__link">
    SynchronizeDomainProjectionsCommand
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-factory" title="Context Factory" class="md-nav__link">
    Context Factory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" title="API" class="md-nav__link">
    API
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configureinputdefinition-definition-void" title="configure(InputDefinition $definition): void" class="md-nav__link">
    configure(InputDefinition $definition): void
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcontextinputinterface-input-styleinterface-io-array-values-array" title="getContext(InputInterface $input, StyleInterface $io, array $values = []): array" class="md-nav__link">
    getContext(InputInterface $input, StyleInterface $io, array $values = []): array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementations" title="Implementations" class="md-nav__link">
    Implementations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#msgphpdomaininfraconsolecontextclasscontextfactory" title="MsgPhp\Domain\Infra\Console\Context\ClassContextFactory" class="md-nav__link">
    MsgPhp\Domain\Infra\Console\Context\ClassContextFactory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#customizing-context-elements" title="Customizing context elements" class="md-nav__link">
    Customizing context elements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basic-example" title="Basic example" class="md-nav__link">
    Basic example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#msgphpdomaininfraconsolecontextdoctrineentitycontextfactory" title="MsgPhp\Domain\Infra\Console\Context\DoctrineEntityContextFactory" class="md-nav__link">
    MsgPhp\Domain\Infra\Console\Context\DoctrineEntityContextFactory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/msgphp/msgphp/blob/master/docs/infrastructure/symfony-console.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="symfony-console">Symfony Console</h1>
<p>An overview of available infrastructural code when using <a href="https://symfony.com/doc/current/components/console.html">Symfony Console</a>.</p>
<ul>
<li>Requires <a href="https://packagist.org/packages/symfony/console">symfony/console</a></li>
</ul>
<h2 id="commands">Commands</h2>
<p>Various standard <a href="https://symfony.com/doc/current/console.html">console commands</a> are provided depending on used domain infrastructure. They are defined in the
<code>MsgPhp\Domain\Infra\Console\Command\</code> namespace.</p>
<h3 id="initializedomainprojectiontypescommand"><code>InitializeDomainProjectionTypesCommand</code></h3>
<p>Initializes a <a href="../../projection/type-registry/">projection type registry</a>.</p>
<div class="codehilite"><pre><span></span>bin/console domain:projection:initialize-types <span class="o">[</span>--force<span class="o">]</span>
</pre></div>


<h3 id="synchronizedomainprojectionscommand"><code>SynchronizeDomainProjectionsCommand</code></h3>
<p>Synchronizes domain objects and their <a href="../../projection/models/">projections</a> using the <a href="../../projection/synchronization/">projection synchronization</a>
utility service.</p>
<div class="codehilite"><pre><span></span>bin/console domain:projection:synchronize
</pre></div>


<h2 id="context-factory">Context Factory</h2>
<p>A context factory is bound to <code>MsgPhp\Domain\Infra\Console\Context\ContextFactoryInterface</code>. Its purpose is to leverage
a CLI command in an effort to interactively built an arbitrary array value (the context).</p>
<h3 id="api">API</h3>
<h4 id="configureinputdefinition-definition-void"><code>configure(InputDefinition $definition): void</code></h4>
<p>Configure a command input definition. See also <a href="https://api.symfony.com/master/Symfony/Component/Console/Input/InputDefinition.html"><code>InputDefinition</code></a>. Should be called before using
<code>getContext()</code>.</p>
<hr />
<h4 id="getcontextinputinterface-input-styleinterface-io-array-values-array"><code>getContext(InputInterface $input, StyleInterface $io, array $values = []): array</code></h4>
<p>Resolve the actual context from the console IO. See also <a href="https://api.symfony.com/master/Symfony/Component/Console/Input/InputInterface.html"><code>InputInterface</code></a> and <a href="https://api.symfony.com/master/Symfony/Component/Console/Style/StyleInterface.html"><code>StyleInterface</code></a>.
Any element value provided by <code>$values</code> takes precedence and should be used as-is.</p>
<h3 id="implementations">Implementations</h3>
<h4 id="msgphpdomaininfraconsolecontextclasscontextfactory"><code>MsgPhp\Domain\Infra\Console\Context\ClassContextFactory</code></h4>
<p>Factorizes a context based on any class method signature. It configures the CLI signature by mapping required class
method arguments to command arguments, whereas optional ones are mapped to command options.</p>
<div class="codehilite"><pre><span></span>bin/console <span class="nb">command</span> --optional-argument <span class="o">[</span>--<span class="o">]</span> required-argument
</pre></div>


<p>In both cases a value is optional, if the actual class method argument is required and no value is given it will be
asked interactively. If interaction is not possible an exception will be thrown instead.</p>
<ul>
<li><code>__construct(string $class, string $method, array $classMapping = [], int $flags = 0, ClassContextElementFactoryInterface $elementFactory = null)</code><ul>
<li><code>$class / $method</code>: The class method to resolve</li>
<li><code>$classMapping</code>: Global class mapping. Usually used to map abstracts to concretes.</li>
<li><code>$flags</code>: A bit mask value to toggle various flags<ul>
<li><code>ClassContextBuilder::ALWAYS_OPTIONAL</code>: Always map class method arguments to command options</li>
<li><code>ClassContextBuilder::NO_DEFAULTS</code>: Leave out default values when calling <code>getContext()</code></li>
<li><code>ClassContextBuilder::REUSE_DEFINITION</code>: Reuse the original input definition for matching class method
   arguments</li>
</ul>
</li>
<li><code>$elementFactory</code>: A custom element factory to use. See also <a href="#customizing-context-elements">Customizing context elements</a>.</li>
</ul>
</li>
</ul>
<h5 id="customizing-context-elements">Customizing context elements</h5>
<p>Per-element configuration can be provided by implementing a <code>MsgPhp\Domain\Infra\Console\Context\ClassContextElementFactoryInterface</code>.</p>
<ul>
<li><code>getElement(string $class, string $method, string $argument): ContextElement</code><ul>
<li>Get a custom <a href="https://msgphp.github.io/api/MsgPhp/Domain/Infra/Console/Context/ContextElement.html"><code>ContextElement</code></a> to apply to a specific class/method/argument pair</li>
</ul>
</li>
</ul>
<p>A default implementation is provided by <code>MsgPhp\Domain\Infra\Console\Context\ClassContextElementFactory</code> which simply
transforms argument names to human readable values so that <code>$argumentName</code> becomes <code>Argument Name</code>.</p>
<h5 id="basic-example">Basic example</h5>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">MsgPhp\Domain\Infra\Console\Context\ClassContextFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Command\Command</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Input\InputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Output\OutputInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Console\Style\SymfonyStyle</span><span class="p">;</span>

<span class="c1">// --- SETUP ---</span>

<span class="k">class</span> <span class="nc">MyObject</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$argument</span><span class="p">,</span> <span class="nv">$option</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">MyCommand</span> <span class="k">extends</span> <span class="nx">Command</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$contextFactory</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contextFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ClassContextFactory</span><span class="p">(</span><span class="nx">MyObject</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;__construct&#39;</span><span class="p">);</span>

        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">configure</span><span class="p">()</span><span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;my-command&#39;</span><span class="p">);</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contextFactory</span><span class="o">-&gt;</span><span class="na">configure</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getDefinition</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">InputInterface</span> <span class="nv">$input</span><span class="p">,</span><span class="nx">OutputInterface</span> <span class="nv">$output</span><span class="p">)</span><span class="o">:</span> <span class="nx">int</span>
    <span class="p">{</span>
        <span class="nv">$io</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SymfonyStyle</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>
        <span class="nv">$context</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">contextFactory</span><span class="o">-&gt;</span><span class="na">getContext</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$io</span><span class="p">);</span>
        <span class="nv">$object</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyObject</span><span class="p">(</span><span class="o">...</span><span class="nb">array_values</span><span class="p">(</span><span class="nv">$context</span><span class="p">));</span>

        <span class="c1">// do something</span>

        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// --- USAGE ---</span>

<span class="c1">// $ bin/console my-command [--option=OPTION] [--] [&lt;argument&gt;]</span>
</pre></div>


<h4 id="msgphpdomaininfraconsolecontextdoctrineentitycontextfactory"><code>MsgPhp\Domain\Infra\Console\Context\DoctrineEntityContextFactory</code></h4>
<p>A <a href="../doctrine-orm/">Doctrine</a> entity aware context factory. It decorates any context factory. Its purpose is to
provide a discriminator value into the resulting context when working with <a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html">inheritance</a>.</p>
<ul>
<li><code>__construct(ContextFactoryInterface $factory, EntityManagerInterface $em, string $class)</code><ul>
<li><code>$factory</code>: The decorated context factory</li>
<li><code>$em</code>: The entity manager to use</li>
<li><code>$class</code>: The entity class to use</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../psr-container/" title="PSR Container" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                PSR Container
              </span>
            </div>
          </a>
        
        
          <a href="../uuid/" title="UUID" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                UUID
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>